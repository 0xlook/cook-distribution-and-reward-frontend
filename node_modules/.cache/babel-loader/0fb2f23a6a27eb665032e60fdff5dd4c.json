{"ast":null,"code":"import _slicedToArray from\"/Users/huanwen/Work/Cook/cook-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Modal}from'@aragon/ui';import BigNumber from'bignumber.js';import{BalanceBlock}from'../common/index';import{unstake}from'../../utils/web3';import{isPos,toBaseUnitBN}from'../../utils/number';import{UNI}from\"../../constants/tokens\";import BigNumberInput from\"../common/BigNumberInput\";import ActionButton from\"../common/ActionButton\";import colors from'../../constants/colors';import{Container,Row,Col}from'react-grid-system';import ListTable from\"../PoolList/ListTable\";function Unstake(_ref){var user=_ref.user,poolAddress=_ref.poolAddress,unstakable=_ref.unstakable,locked=_ref.locked,pools=_ref.pools;var _useState=useState(new BigNumber(0)),_useState2=_slicedToArray(_useState,2),unstakeAmount=_useState2[0],setUnstakeAmount=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),opened=_useState4[0],setOpened=_useState4[1];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ActionButton,{label:\"WITHDRAW\",color:colors.button,onClick:function onClick(){setOpened(true);},disabled:poolAddress===''||user===''}),/*#__PURE__*/React.createElement(Modal,{visible:opened,onClose:function onClose(){return setOpened(false);}},/*#__PURE__*/React.createElement(Container,{style:{flexBasis:'100%',paddingTop:'5%'}},/*#__PURE__*/React.createElement(ListTable,{pools:pools,selectedPool:poolAddress}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:12,lg:6},/*#__PURE__*/React.createElement(BalanceBlock,{asset:\"Locked\",balance:locked,suffix:\"UNI-V2\",type:\"row\"})),/*#__PURE__*/React.createElement(Col,{sm:12,lg:6},/*#__PURE__*/React.createElement(BalanceBlock,{asset:\"Available\",balance:unstakable,suffix:\"UNI-V2\",type:\"row\"})),/*#__PURE__*/React.createElement(Col,{sm:12,lg:12},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(BigNumberInput,{adornment:\"UNI-V2\",value:unstakeAmount,setter:setUnstakeAmount,max:function max(){setUnstakeAmount(unstakable);}}))),/*#__PURE__*/React.createElement(Col,{sm:12,lg:12,style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(ActionButton,{label:\"WITHDRAW\",color:colors.button,onClick:function onClick(){unstake(poolAddress,toBaseUnitBN(unstakeAmount,UNI.decimals),function(hash){setUnstakeAmount(new BigNumber(0));setOpened(false);});},disabled:poolAddress===''||user===''||!isPos(unstakeAmount)||unstakeAmount.isGreaterThan(unstakable)}))))));}export default Unstake;","map":{"version":3,"sources":["/Users/huanwen/Work/Cook/cook-frontend/src/components/Pool/Unstake.tsx"],"names":["React","useState","Modal","BigNumber","BalanceBlock","unstake","isPos","toBaseUnitBN","UNI","BigNumberInput","ActionButton","colors","Container","Row","Col","ListTable","Unstake","user","poolAddress","unstakable","locked","pools","unstakeAmount","setUnstakeAmount","opened","setOpened","button","flexBasis","paddingTop","textAlign","decimals","hash","isGreaterThan"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Modal } from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport { BalanceBlock } from '../common/index';\nimport {unstake} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {UNI} from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport ActionButton from \"../common/ActionButton\";\nimport colors from '../../constants/colors';\nimport { Container, Row, Col } from 'react-grid-system';\nimport ListTable from \"../PoolList/ListTable\";\n\ntype UnstakeProps = {\n  user: string,\n  poolAddress: string,\n  unstakable: BigNumber,\n  locked: BigNumber,\n  pools?: Array<any>\n};\n\nfunction Unstake({\n  user, poolAddress, unstakable, locked, pools\n}: UnstakeProps) {\n  const [unstakeAmount, setUnstakeAmount] = useState(new BigNumber(0));\n  const [opened, setOpened] = useState(false)\n  return (\n    <div>\n    <ActionButton\n      label={\"WITHDRAW\"}\n      color={colors.button}\n      onClick={() => {\n        setOpened(true)\n      }}\n      disabled={poolAddress === '' || user === ''}\n    />\n    <Modal visible={opened} onClose={()=>setOpened(false)}>\n    <Container style={{flexBasis: '100%', paddingTop: '5%'}}>\n      <ListTable pools={pools} selectedPool={poolAddress}/>\n      <Row>\n        <Col sm={12} lg={6}>\n          <BalanceBlock asset=\"Locked\" balance={locked} suffix={\"UNI-V2\"} type={\"row\"}/>\n        </Col>\n        <Col sm={12} lg={6}>\n          <BalanceBlock asset=\"Available\" balance={unstakable} suffix={\"UNI-V2\"} type={\"row\"}/>\n        </Col>\n        <Col sm={12} lg={12}>\n              <>\n                <BigNumberInput\n                  adornment=\"UNI-V2\"\n                  value={unstakeAmount}\n                  setter={setUnstakeAmount}\n                  max={() => {\n                    setUnstakeAmount(unstakable);\n                  }}\n                />\n              \n              </>\n            </Col>\n          <Col sm={12} lg={12} style={{textAlign:\"center\"}}>\n              <ActionButton\n                label={\"WITHDRAW\"}\n                color={colors.button}\n                onClick={() => {\n                  unstake(\n                    poolAddress,\n                    toBaseUnitBN(unstakeAmount, UNI.decimals),\n                    (hash) => {\n                      setUnstakeAmount(new BigNumber(0))\n                      setOpened(false)\n                    }\n                  );\n                }}\n                disabled={poolAddress === '' || user === '' || !isPos(unstakeAmount) || unstakeAmount.isGreaterThan(unstakable)}\n              />\n          </Col>\n          </Row>\n        </Container>\n    </Modal>\n    </div>\n  );\n}\n\nexport default Unstake;\n"]},"metadata":{},"sourceType":"module"}