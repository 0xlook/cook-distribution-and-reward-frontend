{"ast":null,"code":"import _slicedToArray from\"/Users/huanwen/Work/Cook/cook-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Modal}from'@aragon/ui';import BigNumber from'bignumber.js';import{BalanceBlock}from'../common/index';import{harvest}from'../../utils/web3';import{isPos,toBaseUnitBN}from'../../utils/number';import{COOK}from\"../../constants/tokens\";import BigNumberInput from\"../common/BigNumberInput\";import ActionButton from\"../common/ActionButton\";import colors from'../../constants/colors';import{Container,Row,Col}from'react-grid-system';import ListTable from\"../PoolList/ListTable\";function Harvest(_ref){var user=_ref.user,poolAddress=_ref.poolAddress,userTotalRewarded=_ref.userTotalRewarded,userTotalInVesting=_ref.userTotalInVesting,pools=_ref.pools;var _useState=useState(new BigNumber(0)),_useState2=_slicedToArray(_useState,2),harvestAmount=_useState2[0],setHarvestAmount=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),opened=_useState4[0],setOpened=_useState4[1];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ActionButton,{label:\"HARVEST\",color:colors.secondaryButton,onClick:function onClick(){setOpened(true);},disabled:poolAddress===''||user===''}),/*#__PURE__*/React.createElement(Modal,{visible:opened,onClose:function onClose(){return setOpened(false);}},/*#__PURE__*/React.createElement(Container,{style:{flexBasis:'100%',paddingTop:'5%'}},/*#__PURE__*/React.createElement(ListTable,{pools:pools,selectedPool:poolAddress}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:12,lg:6},/*#__PURE__*/React.createElement(BalanceBlock,{asset:\"To Be Vested\",balance:userTotalRewarded,suffix:\"COOK\",type:\"row\"})),/*#__PURE__*/React.createElement(Col,{sm:12,lg:6},/*#__PURE__*/React.createElement(BalanceBlock,{asset:\"In Vesting\",balance:userTotalInVesting,suffix:\"COOK\",type:\"row\"})),/*#__PURE__*/React.createElement(Col,{sm:12,lg:12},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(BigNumberInput,{adornment:\"COOK\",value:harvestAmount,setter:setHarvestAmount,max:function max(){setHarvestAmount(userTotalRewarded);}}))),/*#__PURE__*/React.createElement(Col,{sm:12,lg:12,style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(ActionButton,{label:\"HARVEST\",color:colors.secondaryButton,onClick:function onClick(){harvest(poolAddress,toBaseUnitBN(harvestAmount,COOK.decimals),function(hash){setHarvestAmount(new BigNumber(0));setOpened(false);});},disabled:poolAddress===''||user===''||!isPos(harvestAmount)||harvestAmount.isGreaterThan(userTotalRewarded)}))))));}export default Harvest;","map":{"version":3,"sources":["/Users/huanwen/Work/Cook/cook-frontend/src/components/Pool/Harvest.tsx"],"names":["React","useState","Modal","BigNumber","BalanceBlock","harvest","isPos","toBaseUnitBN","COOK","BigNumberInput","ActionButton","colors","Container","Row","Col","ListTable","Harvest","user","poolAddress","userTotalRewarded","userTotalInVesting","pools","harvestAmount","setHarvestAmount","opened","setOpened","secondaryButton","flexBasis","paddingTop","textAlign","decimals","hash","isGreaterThan"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Modal } from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport { BalanceBlock } from '../common/index';\nimport {harvest} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {COOK} from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport ActionButton from \"../common/ActionButton\";\nimport colors from '../../constants/colors';\nimport { Container, Row, Col } from 'react-grid-system';\nimport ListTable from \"../PoolList/ListTable\";\n\ntype HarvestProps = {\n  user: string,\n  poolAddress: string,\n  userTotalRewarded: BigNumber,\n  userTotalInVesting: BigNumber,\n  pools?: Array<any>\n};\n\nfunction Harvest({\n  user, poolAddress, userTotalRewarded, userTotalInVesting,pools\n}: HarvestProps) {\n  const [harvestAmount, setHarvestAmount] = useState(new BigNumber(0));\n  const [opened, setOpened] = useState(false)\n  return (\n    <div>\n    <ActionButton\n      label={\"HARVEST\"}\n      color={colors.secondaryButton}\n      onClick={() => {\n        setOpened(true)\n      }}\n      disabled={poolAddress === '' || user === ''}\n    />\n    <Modal visible={opened} onClose={()=>setOpened(false)} >\n    <Container style={{flexBasis: '100%', paddingTop: '5%'}}>\n      <ListTable pools={pools} selectedPool={poolAddress}/>\n      <Row >\n        <Col sm={12} lg={6}>\n          <BalanceBlock asset=\"To Be Vested\" balance={userTotalRewarded} suffix={\"COOK\"} type={\"row\"}/>\n        </Col>\n        <Col sm={12} lg={6}>\n          <BalanceBlock asset=\"In Vesting\" balance={userTotalInVesting} suffix={\"COOK\"} type={\"row\"}/>\n        </Col>\n        {/* Harvest UNI-V2 within Pool */}\n        <Col sm={12} lg={12}>\n              <>\n                <BigNumberInput\n                  adornment=\"COOK\"\n                  value={harvestAmount}\n                  setter={setHarvestAmount}\n                  max={() => {\n                    setHarvestAmount(userTotalRewarded);\n                  }}\n                />\n              \n              </>\n              </Col>\n        <Col sm={12} lg={12} style={{textAlign:\"center\"}}>\n        <ActionButton\n          label={\"HARVEST\"}\n          color={colors.secondaryButton}\n          onClick={() => {\n            harvest(\n              poolAddress,\n              toBaseUnitBN(harvestAmount, COOK.decimals),\n              (hash) => {\n                setHarvestAmount(new BigNumber(0))\n                setOpened(false)\n              }\n            );\n          }}\n          disabled={poolAddress === '' || user === '' || !isPos(harvestAmount) || harvestAmount.isGreaterThan(userTotalRewarded)}\n        />\n      </Col>\n          </Row>\n        </Container>\n    </Modal>\n    </div>\n  );\n}\n\nexport default Harvest;\n"]},"metadata":{},"sourceType":"module"}