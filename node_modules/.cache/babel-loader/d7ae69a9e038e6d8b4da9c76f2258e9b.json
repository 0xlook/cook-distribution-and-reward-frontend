{"ast":null,"code":"var _jsxFileName = \"/Users/huanwen/Work/Cook/cook-frontend/src/components/Admin/SetParam.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getStakeLockupDuration, getRewardPerBlock, getBlockNumber, getBlockTimestamp } from '../../utils/infura';\nimport { setPoolStakeLockupDuration, setPoolRewardPerBlock, setPoolBlockNumber, setPoolBlockTimestamp } from '../../utils/web3';\nimport { Box, TextInput, Button, IconCirclePlus } from '@aragon/ui';\nimport { toBaseUnitBN, toTokenUnitsBN } from '../../utils/number';\nimport { COOK } from \"../../constants/tokens\";\nimport BigNumber from 'bignumber.js';\nimport { BalanceBlock } from '../common/index';\n\nfunction SetParam({\n  user,\n  poolAddress\n}) {\n  const {\n    override\n  } = useParams();\n\n  if (override) {\n    user = override;\n  }\n\n  const [stakeLockupDuration, setStakeLockupDuration] = useState(0);\n  const [rewardPerBlock, setRewardPerBlock] = useState(new BigNumber(0));\n  const [blockNumber, setBlockNumber] = useState(0);\n  const [blockTimestamp, setBlockTimestamp] = useState(0); //Update User balances\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [stakeLockupDuration, rewardPerBlockStr, blockNumber, blockTimestamp] = await Promise.all([getStakeLockupDuration(poolAddress), getRewardPerBlock(poolAddress), getBlockNumber(poolAddress), getBlockTimestamp(poolAddress)]);\n      const rewardPerBlock = toTokenUnitsBN(rewardPerBlockStr, COOK.decimals);\n\n      if (!isCancelled) {\n        setStakeLockupDuration(stakeLockupDuration);\n        setRewardPerBlock(rewardPerBlock);\n        setBlockNumber(blockNumber);\n        setBlockTimestamp(blockTimestamp);\n      }\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000); // eslint-disable-next-line consistent-return\n\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, poolAddress]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    heading: `Pool: ${poolAddress}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '32%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BalanceBlock, {\n    asset: \"Block Number\",\n    balance: blockNumber,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '33%',\n      paddingTop: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '60%',\n      minWidth: '6em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: blockNumber,\n    onChange: event => {\n      setBlockNumber(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '40%',\n      minWidth: '7em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    wide: true,\n    icon: /*#__PURE__*/React.createElement(IconCirclePlus, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }),\n    label: \"Set\",\n    onClick: () => {\n      setPoolBlockNumber(poolAddress, blockNumber);\n    },\n    disabled: user === '' || poolAddress === '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '32%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BalanceBlock, {\n    asset: \"Block Timestamp\",\n    balance: blockTimestamp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '33%',\n      paddingTop: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '60%',\n      minWidth: '6em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: blockTimestamp,\n    onChange: event => {\n      setBlockTimestamp(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '40%',\n      minWidth: '7em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    wide: true,\n    icon: /*#__PURE__*/React.createElement(IconCirclePlus, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    }),\n    label: \"Set\",\n    onClick: () => {\n      setPoolBlockTimestamp(poolAddress, blockTimestamp);\n    },\n    disabled: user === '' || poolAddress === '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '32%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BalanceBlock, {\n    asset: \"Lock-Up Period\",\n    balance: stakeLockupDuration,\n    suffix: \"Days\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '33%',\n      paddingTop: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '60%',\n      minWidth: '6em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TextInput, {\n    adornment: \"Days\",\n    adornmentPosition: \"end\",\n    value: stakeLockupDuration,\n    onChange: event => {\n      setStakeLockupDuration(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '40%',\n      minWidth: '7em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    wide: true,\n    icon: /*#__PURE__*/React.createElement(IconCirclePlus, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    }),\n    label: \"Set\",\n    onClick: () => {\n      setPoolStakeLockupDuration(poolAddress, stakeLockupDuration);\n    },\n    disabled: user === '' || poolAddress === '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '32%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BalanceBlock, {\n    asset: \"Reward Per Block\",\n    balance: rewardPerBlock,\n    suffix: \"COOK/BLOCK\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '33%',\n      paddingTop: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '60%',\n      minWidth: '6em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TextInput, {\n    adornment: \"COOK/BLOCK\",\n    adornmentPosition: \"end\",\n    value: rewardPerBlock,\n    onChange: event => {\n      setRewardPerBlock(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '40%',\n      minWidth: '7em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    wide: true,\n    icon: /*#__PURE__*/React.createElement(IconCirclePlus, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }),\n    label: \"Set\",\n    onClick: () => {\n      setPoolRewardPerBlock(poolAddress, toBaseUnitBN(rewardPerBlock, COOK.decimals));\n    },\n    disabled: user === '' || poolAddress === '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default SetParam;","map":{"version":3,"sources":["/Users/huanwen/Work/Cook/cook-frontend/src/components/Admin/SetParam.tsx"],"names":["React","useState","useEffect","useParams","getStakeLockupDuration","getRewardPerBlock","getBlockNumber","getBlockTimestamp","setPoolStakeLockupDuration","setPoolRewardPerBlock","setPoolBlockNumber","setPoolBlockTimestamp","Box","TextInput","Button","IconCirclePlus","toBaseUnitBN","toTokenUnitsBN","COOK","BigNumber","BalanceBlock","SetParam","user","poolAddress","override","stakeLockupDuration","setStakeLockupDuration","rewardPerBlock","setRewardPerBlock","blockNumber","setBlockNumber","blockTimestamp","setBlockTimestamp","isCancelled","updateUserInfo","rewardPerBlockStr","Promise","all","decimals","id","setInterval","clearInterval","display","flexWrap","flexBasis","paddingTop","width","minWidth","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getStakeLockupDuration,\n  getRewardPerBlock,\n  getBlockNumber,\n  getBlockTimestamp\n} from '../../utils/infura';\nimport {\n  setPoolStakeLockupDuration,\n  setPoolRewardPerBlock,\n  setPoolBlockNumber,\n  setPoolBlockTimestamp\n} from '../../utils/web3';\nimport {\n  Box, TextInput, Button, IconCirclePlus\n} from '@aragon/ui';\nimport {toBaseUnitBN,toTokenUnitsBN} from '../../utils/number';\nimport {COOK} from \"../../constants/tokens\";\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock,\n} from '../common/index';\n\nfunction SetParam({ user, poolAddress }: {user: string, poolAddress: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n  const [stakeLockupDuration, setStakeLockupDuration] = useState(0);\n  const [rewardPerBlock, setRewardPerBlock] = useState(new BigNumber(0));\n  const [blockNumber, setBlockNumber] = useState(0);\n  const [blockTimestamp, setBlockTimestamp] = useState(0);\n\n  //Update User balances\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        stakeLockupDuration,\n        rewardPerBlockStr,\n        blockNumber,\n        blockTimestamp,\n      ] = await Promise.all([\n        getStakeLockupDuration(poolAddress),\n        getRewardPerBlock(poolAddress),\n        getBlockNumber(poolAddress),\n        getBlockTimestamp(poolAddress)\n      ]);\n\n      const rewardPerBlock = toTokenUnitsBN(rewardPerBlockStr, COOK.decimals);\n\n      if (!isCancelled) {\n        setStakeLockupDuration(stakeLockupDuration);\n        setRewardPerBlock(rewardPerBlock);\n        setBlockNumber(blockNumber);\n        setBlockTimestamp(blockTimestamp);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, poolAddress]);\n\n  return (\n    <>\n       <Box heading={`Pool: ${poolAddress}`}>\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Block Number\" balance={blockNumber}/>\n          </div>\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <TextInput\n                    value={blockNumber}\n                    onChange={event => {\n                      setBlockNumber(event.target.value)\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={<IconCirclePlus/>}\n                  label=\"Set\"\n                  onClick={() => {\n                    setPoolBlockNumber(\n                      poolAddress,\n                      blockNumber\n                    );\n                  }}\n                  disabled={user === '' ||  poolAddress === ''}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n        </div>\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Block Timestamp\" balance={blockTimestamp}/>\n          </div>\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <TextInput\n                    value={blockTimestamp}\n                    onChange={event => {\n                      setBlockTimestamp(event.target.value)\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={<IconCirclePlus/>}\n                  label=\"Set\"\n                  onClick={() => {\n                    setPoolBlockTimestamp(\n                      poolAddress,\n                      blockTimestamp\n                    );\n                  }}\n                  disabled={user === '' ||  poolAddress === ''}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n        </div>\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Lock-Up Period\" balance={stakeLockupDuration} suffix={\"Days\"}/>\n          </div>\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <TextInput\n                    adornment=\"Days\"\n                    adornmentPosition=\"end\"\n                    value={stakeLockupDuration}\n                    onChange={event => {\n                      setStakeLockupDuration(event.target.value)\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={<IconCirclePlus/>}\n                  label=\"Set\"\n                  onClick={() => {\n                    setPoolStakeLockupDuration(\n                      poolAddress,\n                      stakeLockupDuration\n                    );\n                  }}\n                  disabled={user === '' ||  poolAddress === ''}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n        </div>\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Reward Per Block\" balance={rewardPerBlock} suffix={\"COOK/BLOCK\"}/>\n          </div>\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <TextInput\n                    adornment=\"COOK/BLOCK\"\n                    adornmentPosition=\"end\"\n                    value={rewardPerBlock}\n                    onChange={event => {\n                      setRewardPerBlock(event.target.value)\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={<IconCirclePlus/>}\n                  label=\"Set\"\n                  onClick={() => {\n                    setPoolRewardPerBlock(\n                      poolAddress,\n                      toBaseUnitBN(rewardPerBlock, COOK.decimals),\n\n                    );\n                  }}\n                  disabled={user === '' ||  poolAddress === ''}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n        </div>\n      </Box>\n    </>\n  );\n}\n\nexport default SetParam;\n"]},"metadata":{},"sourceType":"module"}