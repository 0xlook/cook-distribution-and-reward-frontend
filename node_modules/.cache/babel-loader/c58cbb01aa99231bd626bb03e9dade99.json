{"ast":null,"code":"import _regeneratorRuntime from\"/Users/huanwen/Work/Cook/cook-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/huanwen/Work/Cook/cook-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Web3 from'web3';var poolAbi=require('../constants/abi/Pool.json');var mockPoolAbi=require('../constants/abi/MockPool.json');var distributionAbi=require('../constants/abi/TokenDistribution.json');var dollarAbi=require('../constants/abi/Dollar.json');var priceComsumerAbi=require('../constants/abi/PriceConsumer.json');// eslint-disable-next-line no-undef\n// console.log(window.ethereum);\nvar web3=new Web3(window.ethereum?window.ethereum:null);/**\n *\n * @param {string} token address\n * @param {string} account address\n * @param {string} spender address\n * @return {Promise<string>}\n */export var getTokenAllowance=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token,account,spender){var tokenContract;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tokenContract=new web3.eth.Contract(dollarAbi,token);return _context.abrupt(\"return\",tokenContract.methods.allowance(account,spender).call());case 2:case\"end\":return _context.stop();}}},_callee);}));return function getTokenAllowance(_x,_x2,_x3){return _ref.apply(this,arguments);};}();/**\n *\n * @param {string} token address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getTokenBalance=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(token,account){var tokenContract;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(account==='')){_context2.next=2;break;}return _context2.abrupt(\"return\",'0');case 2:tokenContract=new web3.eth.Contract(dollarAbi,token);return _context2.abrupt(\"return\",tokenContract.methods.balanceOf(account).call());case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getTokenBalance(_x4,_x5){return _ref2.apply(this,arguments);};}();// Pool\n/**\n *\n * @param {string} pool address\n * @return {Promise<string>}\n */export var getTotalStaked=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(pool){var poolContract;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(window.ethereum){_context3.next=2;break;}return _context3.abrupt(\"return\",0);case 2:poolContract=new web3.eth.Contract(poolAbi,pool);return _context3.abrupt(\"return\",poolContract.methods.totalStaked().call());case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function getTotalStaked(_x6){return _ref3.apply(this,arguments);};}();export var getStakeLockupDuration=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(pool){var poolContract;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(window.ethereum){_context4.next=2;break;}return _context4.abrupt(\"return\",0);case 2:poolContract=new web3.eth.Contract(poolAbi,pool);return _context4.abrupt(\"return\",poolContract.methods.getStakeLockupDuration().call());case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function getStakeLockupDuration(_x7){return _ref4.apply(this,arguments);};}();export var getRewardPerBlock=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(pool){var poolContract;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(window.ethereum){_context5.next=2;break;}return _context5.abrupt(\"return\",0);case 2:poolContract=new web3.eth.Contract(poolAbi,pool);return _context5.abrupt(\"return\",poolContract.methods.getRewardPerBlock().call());case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function getRewardPerBlock(_x8){return _ref5.apply(this,arguments);};}();/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getPoolBalanceOfStaked=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(pool,account){var poolContract;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(account==='')){_context6.next=2;break;}return _context6.abrupt(\"return\",'0');case 2:poolContract=new web3.eth.Contract(poolAbi,pool);return _context6.abrupt(\"return\",poolContract.methods.balanceOfStaked(account).call());case 4:case\"end\":return _context6.stop();}}},_callee6);}));return function getPoolBalanceOfStaked(_x9,_x10){return _ref6.apply(this,arguments);};}();/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getPoolBalanceOfRewarded=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(pool,account){var poolContract;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(account==='')){_context7.next=2;break;}return _context7.abrupt(\"return\",'0');case 2:poolContract=new web3.eth.Contract(poolAbi,pool);return _context7.abrupt(\"return\",poolContract.methods.balanceOfRewarded(account).call());case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function getPoolBalanceOfRewarded(_x11,_x12){return _ref7.apply(this,arguments);};}();/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getPoolBalanceOfVesting=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(pool,account){var poolContract;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!(account==='')){_context8.next=2;break;}return _context8.abrupt(\"return\",'0');case 2:poolContract=new web3.eth.Contract(poolAbi,pool);return _context8.abrupt(\"return\",poolContract.methods.balanceOfVesting(account).call());case 4:case\"end\":return _context8.stop();}}},_callee8);}));return function getPoolBalanceOfVesting(_x13,_x14){return _ref8.apply(this,arguments);};}();/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getPoolBalanceOfClaimable=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(pool,account){var poolContract;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!(account==='')){_context9.next=2;break;}return _context9.abrupt(\"return\",'0');case 2:poolContract=new web3.eth.Contract(poolAbi,pool);return _context9.abrupt(\"return\",poolContract.methods.balanceOfClaimable(account).call());case 4:case\"end\":return _context9.stop();}}},_callee9);}));return function getPoolBalanceOfClaimable(_x15,_x16){return _ref9.apply(this,arguments);};}();/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getPoolBalanceOfClaimed=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(pool,account){var poolContract;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!(account==='')){_context10.next=2;break;}return _context10.abrupt(\"return\",'0');case 2:poolContract=new web3.eth.Contract(poolAbi,pool);return _context10.abrupt(\"return\",poolContract.methods.balanceOfClaimed(account).call());case 4:case\"end\":return _context10.stop();}}},_callee10);}));return function getPoolBalanceOfClaimed(_x17,_x18){return _ref10.apply(this,arguments);};}();/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getPoolBalanceOfUnstakable=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(pool,account){var poolContract;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!(account==='')){_context11.next=2;break;}return _context11.abrupt(\"return\",'0');case 2:poolContract=new web3.eth.Contract(poolAbi,pool);return _context11.abrupt(\"return\",poolContract.methods.balanceOfUnstakable(account).call());case 4:case\"end\":return _context11.stop();}}},_callee11);}));return function getPoolBalanceOfUnstakable(_x19,_x20){return _ref11.apply(this,arguments);};}();/**\n *\n * @param {string} cookDistribution address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getDistributionVestingAmount=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(cookDistribution,account){var distributionContract;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:distributionContract=new web3.eth.Contract(distributionAbi,cookDistribution);return _context12.abrupt(\"return\",distributionContract.methods.getUserVestingAmount(account).call());case 2:case\"end\":return _context12.stop();}}},_callee12);}));return function getDistributionVestingAmount(_x21,_x22){return _ref12.apply(this,arguments);};}();/**\n *\n * @param {string} cookDistribution address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getDistributionAvalibleAmount=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(cookDistribution,account){var distributionContract;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:distributionContract=new web3.eth.Contract(distributionAbi,cookDistribution);return _context13.abrupt(\"return\",distributionContract.methods.getUserAvailableAmount(account,0).call());case 2:case\"end\":return _context13.stop();}}},_callee13);}));return function getDistributionAvalibleAmount(_x23,_x24){return _ref13.apply(this,arguments);};}();/**\n *\n * @param {string} cookDistribution address\n * @param {string} account address\n * @return {Promise<string>}\n */export var getDistributionVestedAmount=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(cookDistribution,account){var distributionContract;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:distributionContract=new web3.eth.Contract(distributionAbi,cookDistribution);return _context14.abrupt(\"return\",distributionContract.methods.getUserVestedAmount(account,0).call());case 2:case\"end\":return _context14.stop();}}},_callee14);}));return function getDistributionVestedAmount(_x25,_x26){return _ref14.apply(this,arguments);};}();/**\n *\n * @param {string} cookDistribution address\n * @return {Promise<string>}\n */export var getDistributionStartTimestamp=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(cookDistribution){var distributionContract;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:distributionContract=new web3.eth.Contract(distributionAbi,cookDistribution);return _context15.abrupt(\"return\",distributionContract.methods.start().call());case 2:case\"end\":return _context15.stop();}}},_callee15);}));return function getDistributionStartTimestamp(_x27){return _ref15.apply(this,arguments);};}();/** Admin functions (TESTING ONLY) */export var getTodayNumber=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(cookDistribution){var distributionContract;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:distributionContract=new web3.eth.Contract(distributionAbi,cookDistribution);return _context16.abrupt(\"return\",distributionContract.methods.today().call());case 2:case\"end\":return _context16.stop();}}},_callee16);}));return function getTodayNumber(_x28){return _ref16.apply(this,arguments);};}();export var getWETHPrice=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(priceComsumer){var priceComsumerContract;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:priceComsumerContract=new web3.eth.Contract(priceComsumerAbi,priceComsumer);return _context17.abrupt(\"return\",priceComsumerContract.methods.getLatestPrice().call());case 2:case\"end\":return _context17.stop();}}},_callee17);}));return function getWETHPrice(_x29){return _ref17.apply(this,arguments);};}();// deployer account only\nexport var getSevenMAPrice=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(cookDistribution){var distributionContract;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:distributionContract=new web3.eth.Contract(distributionAbi,cookDistribution);return _context18.abrupt(\"return\",distributionContract.methods.getLatestSevenSMA().call());case 2:case\"end\":return _context18.stop();}}},_callee18);}));return function getSevenMAPrice(_x30){return _ref18.apply(this,arguments);};}();export var getBlockNumber=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(pool){var poolContract;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:poolContract=new web3.eth.Contract(mockPoolAbi,pool);return _context19.abrupt(\"return\",poolContract.methods.blockNumberE().call());case 2:case\"end\":return _context19.stop();}}},_callee19);}));return function getBlockNumber(_x31){return _ref19.apply(this,arguments);};}();export var getBlockTimestamp=/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(pool){var poolContract;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:poolContract=new web3.eth.Contract(mockPoolAbi,pool);return _context20.abrupt(\"return\",poolContract.methods.blockTimestampE().call());case 2:case\"end\":return _context20.stop();}}},_callee20);}));return function getBlockTimestamp(_x32){return _ref20.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/huanwen/Work/Cook/cook-frontend/src/utils/infura.js"],"names":["Web3","poolAbi","require","mockPoolAbi","distributionAbi","dollarAbi","priceComsumerAbi","web3","window","ethereum","getTokenAllowance","token","account","spender","tokenContract","eth","Contract","methods","allowance","call","getTokenBalance","balanceOf","getTotalStaked","pool","poolContract","totalStaked","getStakeLockupDuration","getRewardPerBlock","getPoolBalanceOfStaked","balanceOfStaked","getPoolBalanceOfRewarded","balanceOfRewarded","getPoolBalanceOfVesting","balanceOfVesting","getPoolBalanceOfClaimable","balanceOfClaimable","getPoolBalanceOfClaimed","balanceOfClaimed","getPoolBalanceOfUnstakable","balanceOfUnstakable","getDistributionVestingAmount","cookDistribution","distributionContract","getUserVestingAmount","getDistributionAvalibleAmount","getUserAvailableAmount","getDistributionVestedAmount","getUserVestedAmount","getDistributionStartTimestamp","start","getTodayNumber","today","getWETHPrice","priceComsumer","priceComsumerContract","getLatestPrice","getSevenMAPrice","getLatestSevenSMA","getBlockNumber","blockNumberE","getBlockTimestamp","blockTimestampE"],"mappings":"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","sourcesContent":["import Web3 from 'web3';\n\nconst poolAbi = require('../constants/abi/Pool.json');\nconst mockPoolAbi = require('../constants/abi/MockPool.json');\nconst distributionAbi = require('../constants/abi/TokenDistribution.json');\nconst dollarAbi = require('../constants/abi/Dollar.json');\nconst priceComsumerAbi = require('../constants/abi/PriceConsumer.json');\n\n// eslint-disable-next-line no-undef\n// console.log(window.ethereum);\nlet web3 = new Web3(window.ethereum?window.ethereum:null);\n\n/**\n *\n * @param {string} token address\n * @param {string} account address\n * @param {string} spender address\n * @return {Promise<string>}\n */\nexport const getTokenAllowance = async (token, account, spender) => {\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.allowance(account, spender).call();\n};\n\n/**\n *\n * @param {string} token address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getTokenBalance = async (token, account) => {\n  if (account === '') return '0';\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.balanceOf(account).call();\n};\n\n// Pool\n/**\n *\n * @param {string} pool address\n * @return {Promise<string>}\n */\nexport const getTotalStaked = async (pool) => {\n  if (!window.ethereum) {\n    return 0;\n  }\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalStaked().call();\n};\n\nexport const getStakeLockupDuration = async (pool) => {\n  if (!window.ethereum) {\n    return 0;\n  }\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.getStakeLockupDuration().call();\n};\n\nexport const getRewardPerBlock = async (pool) => {\n  if (!window.ethereum) {\n    return 0;\n  }\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.getRewardPerBlock().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfStaked = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfStaked(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfRewarded = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfRewarded(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfVesting = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfVesting(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfClaimable = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfClaimable(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfClaimed = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfClaimed(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfUnstakable = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfUnstakable(account).call();\n};\n\n/**\n *\n * @param {string} cookDistribution address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getDistributionVestingAmount = async (cookDistribution, account) => {\n  const distributionContract = new web3.eth.Contract(distributionAbi, cookDistribution);\n  return distributionContract.methods.getUserVestingAmount(account).call();\n};\n\n/**\n *\n * @param {string} cookDistribution address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getDistributionAvalibleAmount = async (cookDistribution, account) => {\n  const distributionContract = new web3.eth.Contract(distributionAbi, cookDistribution);\n  return distributionContract.methods.getUserAvailableAmount(account,0).call();\n};\n\n/**\n *\n * @param {string} cookDistribution address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getDistributionVestedAmount = async (cookDistribution, account) => {\n  const distributionContract = new web3.eth.Contract(distributionAbi, cookDistribution);\n  return distributionContract.methods.getUserVestedAmount(account,0).call();\n};\n\n\n\n/**\n *\n * @param {string} cookDistribution address\n * @return {Promise<string>}\n */\nexport const getDistributionStartTimestamp = async (cookDistribution) => {\n  const distributionContract = new web3.eth.Contract(distributionAbi, cookDistribution);\n  return distributionContract.methods.start().call();\n};\n\n\n\n/** Admin functions (TESTING ONLY) */\nexport const getTodayNumber = async (cookDistribution) => {\n  const distributionContract = new web3.eth.Contract(distributionAbi, cookDistribution);\n  return distributionContract.methods.today().call();\n};\n\n\nexport const getWETHPrice = async (priceComsumer) => {\n  const priceComsumerContract = new web3.eth.Contract(priceComsumerAbi, priceComsumer);\n  return priceComsumerContract.methods.getLatestPrice().call();\n};\n\n// deployer account only\nexport const getSevenMAPrice = async (cookDistribution) => {\n  const distributionContract = new web3.eth.Contract(distributionAbi, cookDistribution);\n  return distributionContract.methods.getLatestSevenSMA().call();\n};\n\nexport const getBlockNumber = async (pool) => {\n  const poolContract = new web3.eth.Contract(mockPoolAbi, pool);\n  return poolContract.methods.blockNumberE().call();\n};\n\nexport const getBlockTimestamp = async (pool) => {\n  const poolContract = new web3.eth.Contract(mockPoolAbi, pool);\n  return poolContract.methods.blockTimestampE().call();\n};\n"]},"metadata":{},"sourceType":"module"}