{"ast":null,"code":"var _jsxFileName = \"/Users/huanwen/Work/cook-frontend/src/components/Admin/SetDay.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getTodayNumber, getDistributionStartTimestamp } from '../../utils/infura';\nimport { setDay } from '../../utils/web3';\nimport { Box, Button, IconCirclePlus } from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport { NumberBlock } from '../common/index';\nimport BigNumberInput from \"../common/BigNumberInput\";\n\nfunction SetDay({\n  user,\n  cookDistribution\n}) {\n  const {\n    override\n  } = useParams();\n\n  if (override) {\n    user = override;\n  }\n\n  const [startDay, setStartDay] = useState(new BigNumber(0));\n  const [today, setToday] = useState(new BigNumber(0));\n  const [dayNumber, setDayNumber] = useState(new BigNumber(0)); //Update User balances\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [startTimeStamp, tDay] = await Promise.all([getDistributionStartTimestamp(cookDistribution), getTodayNumber(cookDistribution)]);\n      const startDay = new BigNumber(startTimeStamp).div(86400).decimalPlaces(0, 1);\n      const todayNumber = new BigNumber(tDay);\n\n      if (!isCancelled) {\n        setStartDay(new BigNumber(startDay));\n        setToday(new BigNumber(todayNumber));\n      }\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 1000); // eslint-disable-next-line consistent-return\n\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, cookDistribution]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    heading: \"CookDistributionDay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%',\n      paddingTop: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '32%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(NumberBlock, {\n    title: \"Startday Number\",\n    num: startDay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 14\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexBasis: '32%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(NumberBlock, {\n    title: \"Today Number\",\n    num: today,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 14\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '60%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(BigNumberInput, {\n    adornment: \"Day\",\n    value: dayNumber,\n    setter: setDayNumber,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 16\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '40%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    wide: true,\n    icon: /*#__PURE__*/React.createElement(IconCirclePlus, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 22\n      }\n    }),\n    label: \"Set\",\n    onClick: () => {\n      setDay(cookDistribution, dayNumber);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 14\n    }\n  }))))));\n}\n\nexport default SetDay;","map":{"version":3,"sources":["/Users/huanwen/Work/cook-frontend/src/components/Admin/SetDay.tsx"],"names":["React","useState","useEffect","useParams","getTodayNumber","getDistributionStartTimestamp","setDay","Box","Button","IconCirclePlus","BigNumber","NumberBlock","BigNumberInput","SetDay","user","cookDistribution","override","startDay","setStartDay","today","setToday","dayNumber","setDayNumber","isCancelled","updateUserInfo","startTimeStamp","tDay","Promise","all","div","decimalPlaces","todayNumber","id","setInterval","clearInterval","width","paddingTop","display","flexBasis"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getTodayNumber, getDistributionStartTimestamp\n} from '../../utils/infura';\nimport {\n  setDay\n} from '../../utils/web3';\nimport {\n  Box, TextInput, Button, IconCirclePlus\n} from '@aragon/ui';\nimport {toBaseUnitBN,toTokenUnitsBN} from '../../utils/number';\nimport BigNumber from 'bignumber.js';\nimport {\n  NumberBlock,\n} from '../common/index';\nimport BigNumberInput from \"../common/BigNumberInput\";\n\nfunction SetDay({ user, cookDistribution }: {user: string, cookDistribution: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n\n  const [startDay, setStartDay] = useState(new BigNumber(0));\n  const [today, setToday] = useState(new BigNumber(0));\n  const [dayNumber, setDayNumber] = useState(new BigNumber(0));\n\n  //Update User balances\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        startTimeStamp,\n        tDay\n      ] = await Promise.all([\n        getDistributionStartTimestamp(cookDistribution),\n        getTodayNumber(cookDistribution)\n      ]);\n\n      const startDay = new BigNumber(startTimeStamp).div(86400).decimalPlaces(0, 1);\n      const todayNumber = new BigNumber(tDay);\n\n      if (!isCancelled) {\n        setStartDay(new BigNumber(startDay));\n        setToday(new BigNumber(todayNumber));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 1000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, cookDistribution]);\n\n  return (\n    <>\n       <Box heading=\"CookDistributionDay\">\n       <div style={{width: '100%', paddingTop: '2%'}}>\n         <div style={{display: 'flex'}}>\n           <div style={{flexBasis: '32%'}}>\n             <NumberBlock title=\"Startday Number\" num={startDay}/>\n           </div>\n           <div style={{flexBasis: '32%'}}>\n             <NumberBlock title=\"Today Number\" num={today}/>\n           </div>\n           <div style={{width: '60%'}}>\n               <BigNumberInput\n                 adornment=\"Day\"\n                 value={dayNumber}\n                 setter={setDayNumber}\n               />\n           </div>\n           <div style={{width: '40%'}}>\n             <Button\n               wide\n               icon={<IconCirclePlus/>}\n               label=\"Set\"\n               onClick={() => {\n                 setDay(\n                   cookDistribution,\n                   dayNumber\n                 );\n               }}\n             />\n           </div>\n         </div>\n       </div>\n\n      </Box>\n    </>\n  );\n}\n\nexport default SetDay;\n"]},"metadata":{},"sourceType":"module"}